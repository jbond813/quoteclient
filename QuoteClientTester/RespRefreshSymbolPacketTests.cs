using Microsoft.VisualStudio.TestTools.UnitTesting;
using MDPackets;
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.IO;
using QuoteClientTester;

namespace MDPackets.Tests
{
    [TestClass()]
    public class RespRefreshSymbolPacketTests
    {
        public  static RespRefreshSymbolPacket getPacket()
        {
            string str = "0E0000286BEE53505900000000000F00FF535350445220532650203530300000000000000000000000000000000000000064000000005020542020202050C6AE040000000000F900000000B4C404F9000000804A5D05F900000000B4C4040000000000000000F900000080ED3E170000000000000000000000000000000010270000E80300004D5A5284030000C990E7010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000004F202000010093002C823B0000000000F900000000B4C404640000004E534451C890E7010100000040D43A0000000000F9000000801D2C04640000004E5344518FFBE501010000009B8F020000000000F9000000801D2C04B80B00004152434160D0E6010200E000D18F020000000000F9000000801D2C04C800000041524341B0D0E6010200E000843D3B0000000000F9000000801D2C04A00F00004E53445176D1E6010100000000D7F1E4FD0A1C2DF9000000801D2C04C40900004544475877D1E60105000000A305871B12F0F42CF9000000801D2C04C40900004241545377D1E601030000000790020000000000F9000000801D2C04A00F00004152434177D1E6010200E0002B90020000000000F9000000801D2C046400000041524341D6D1E6010200E000AD05871B12F0F42CF9000000801D2C04E80300004241545311F5E60103000000544A3B0000000000F9000000801D2C04E80300004E53445111F5E601010000005350590000000058F9000000801D2C04C409000050484C58F199E80106520300535059000000004DF9000000801D2C04F82A00004348535809CAE80106520300CCC7390000000000F900000000879303E80300004E5344518AE0E301010000003F02871B12F0F42CF900000000879303F4010000424154538AE0E3010300000060CC3A0000000000F900000000879303640000004E53445177F1E50101000000F900000000879303F900000000879303D00700004945580068D0E6010B000000FAD6F1E4FD0A1C2DF900000000879303E8030000454447586AD0E60105000000769DA0ADBC0D0F2DF900000000879303E8030000454447416BD0E601040000009F05871B12F0F42CF900000000879303E8030000424154536CD0E60103000000A48F020000000000F900000000879303E8030000415243416BD0E6010200E000803C3B0000000000F900000000879303E80300004E5344516CD0E6010100000017EB8CFB7C10022DF900000000879303E8030000424154596FD0E60108000000779DA0ADBC0D0F2DF900000000879303F401000045444741ADD0E6010400000018EB8CFB7C10022DF900000000879303F401000042415459ADD0E601080000001090020000000000F900000000879303641900004152434177D1E6010200E0005350590000000042F900000000879303C4090000424F5358A321E701065202007B7C020000000000F900000080F0FA021E000000415243418E41E2010200E00048C83A0000000000F900000080F0FA02640000004E534451AEE6E50101000000A0E72C0000000000F9000000005A6202640000004E5344517430C50101000000457C020000000000F9000000005A6202B80B0000415243414FF0E1010200E0000B00871B12F0F42CF9000000005A6202C4090000424154535FF0E10103000000349F380000000000F9000000005A6202A00F00004E53445160F0E101010000007FCEF1E4FD0A1C2DF9000000005A6202C40900004544475860F0E101050000004E7C020000000000F9000000005A6202A00F00004152434160F0E1010200E000D100871B12F0F42CF9000000005A6202F4010000424154536560E2010300000018CF380000000000F9000000005A6202E80300004E5344516560E20101000000ADEB8CFB7C10022DF9000000005A6202F401000042415459AF22E70108000000AF9DA0ADBC0D0F2DF9000000005A6202F401000045444741AF22E7010400000010FF1C0000000000F900000080C3C9012C0100004E534451DE498F01010000005A6B010000000000F900000080C3C901E8030000415243413A2CB4010200600058E02C0000000000F900000080C3C901640000004E534451182AC50101000000F900000080C3C901F900000080C3C901D007000049455800B99EDF010B000000577C020000000000F900000080C3C901641900004152434160F0E1010200E00024F6000000000000F9000000002D3101D0070000415243416C5F96010200E000B896F1E4FD0A1C2DF9000000002D3101C409000045444758C196BC01050003003BD9861B12F0F42CF9000000002D3101C409000042415453C196BC0103000300C8DB010000000000F9000000002D3101A00F000041524341C296BC010200E000FCFD2B0000000000F9000000002D3101A00F00004E534451484CC201010000002CAF2C0000000000F9000000002D3101640000004E534451EFEAC40101000000DADB010000000000F9000000809698006419000041524341C296BC010200E00031DF010000000000F9000000809698000A000000415243414C32BF010200E00098AC2C0000000000F900000080969800640000004E53445106E1C40101000000E468310000000000F900000080969800E80300004E534451A7CCD20101000000CAEB861B12F0F42CF900000080969800F401000042415453BECCD20103000000F900000080969800F900000080969800D007000049455800BFCCD2010B0000008A91020000000000F9000000809698006400000041524341170EE7010200E0009391020000000000F9000000809698006400000041524341170EE7010200E0009C91020000000000F9000000809698006400000041524341170EE7010200E0008C5B3B0000000000F900000080969800640000004E5344510912E70101000000010E000000000000F90000000000000064000000415243411CBADB000200E000C70E000000000000F90000000000000019000000415243411CBADB000200E00017EE000000000000F900000000000000E80300004152434156438D010200E000FB98F1E4FD0A1C2DF900000000000000DF03000045444758F174B70105000000D0932C0000000000F900000000000000640000004E5344515995C40101000000D8CC3A0000000000F900000000000000320000004E53445178F3E50101000000A705871B12F0F42CF900000000000000640000004241545358FEE601030003000427020000000000F80000008033023BA00F000041524341A6FFCE010200E00064E9861B12F0F42CF80000008033023BC409000042415453FCFFCE0103000300ADAFF1E4FD0A1C2DF80000008033023BC409000045444758FCFFCE01050003006005300000000000F80000008033023BA00F00004E534451FCFFCE0101000000F46A310000000000F80000008033023BE80300004E53445161D6D20101000000D6EB861B12F0F42CF80000008033023BF40100004241545378D6D20103000000F80000008033023BF80000008033023BD00700004945580079D6D2010B00000000D8F1E4FD0A1C2DF80000008033023B6400000045444758491EE70105000000AFEB8CFB7C10022DF80000008033023B6400000042415459C135E70108000300B09DA0ADBC0D0F2DF80000008033023B6400000045444741C135E70104000300BE96020000000000F80000008033023BE803000041524341BBB6E8010200E000A126020000000000F8000000009D693A641900004152434133FFCE010200E0007759020000000000F8000000009D693AE8030000415243418AADDD010200E0004B49020000000000F80000008006D139AC0D000041524341862ED8010200E00033F3861B12F0F42CF80000008006D139C409000042415453892ED801030000002CBCF1E4FD0A1C2DF80000008006D139C409000045444758892ED80105000000B405350000000000F80000008006D139A00F00004E534451892ED80101000000DC6E310000000000F800000000703839E80300004E5344511BE0D20101000000DCEB861B12F0F42CF800000000703839F40100004241545332E0D20103000000F800000000703839F800000000703839D007000049455800D37BD3010B0000005449020000000000F8000000007038396419000041524341862ED8010200E0003C1E1A0000000000F800000000430738640000004E534451CF058101010000002836320000000000F800000000430738E80300004E5344510172D301010000002EEE861B12F0F42CF800000000430738F4010000424154531872D30103000000F800000000430738F800000000430738D0070000494558002D21D4010B0000008B93020000000000F800000000430738AC0D000041524341A221E7010200E0006306871B12F0F42CF800000000430738C4090000424154537422E7010300000074643B0000000000F800000000430738A00F00004E534451AF22E701010000000FD8F1E4FD0A1C2DF800000000430738C409000045444758AF22E701050000009493020000000000F800000080AC6E376419000041524341A221E7010200E0003806330000000000F8000000807F3D36E80300004E5344511521D401010000006DEF861B12F0F42CF8000000807F3D36F4010000424154532C21D40103000000C408000000000000F800000000E9A435F4010000415243411BBADB000200E0008621010000000000F800000000E9A4352300000041524341358AA2010200E00039A7F1E4FD0A1C2DF800000080520C3564000000454447585EC3C501050000008CD4370000000000F800000080520C35E80300004E534451F618E0010100000095FA861B12F0F42CF800000080520C35F4010000424154531119E00103000000EC051D0000000000F800000000BC7334F40100004E534451E6758F0101000000C30F000000000000F8000000008F42330D000000415243411CBADB000200E0008511000000000000F800000080F8A9320A000000415243411CBADB000200E0007825020000000000F800000080F8A9328813000041524341687ECE010200E0004232010000000000F800000000DB7D2EFA00000041524341EB08A7010200E0009595020000000000F800000000AE4C2D0F0000004152434128B9E7010200E000CD35000000000000F80000008017B42C640000004152434105C3F200020060007FEF000000000000F80000008017B42CDC05000041524341E9868E010200E000E334000000000000F800000080BD512A64000000415243411E27F200020060000199F1E4FD0A1C2DF80000000027B9299001000045444758F774B701050000009FB6F1E4FD0A1C2DF80000000027B929E02E00004544475808FCD301050000007335000000000000F80000008036BE266400000041524341C8B9F200020060003DE5010000000000F800000080098D256400000041524341B4C5C1010200E000A008000000000000F80000000046C323F4010000415243411BBADB000200E000EC34000000000000F80000000046C32364000000415243410E34F200020060001790F1E4FD0A1C2DF80000000046C3232C01000045444758AB949F01050000004FE5010000000000F800000000EC6021640000004152434166D0C1010200E000EA0C000000000000F800000000BF2F2019000000415243411CBADB000200E000AF0B000000000000F80000000065CD1D19000000415243411CBADB000200E0001B8A000000000000F80000000065CD1DC01200004152434124F640010200E000FC98F1E4FD0A1C2DF80000000065CD1DFA00000045444758F274B7010500000030E4270000000000F80000000065CD1D320000004E534451F574B70101000000DBA3F1E4FD0A1C2DF80000000065CD1DC800000045444758D639C20105000000AA01000000000000F800000000389C1C64000000415243411ABADB000200E000CC0F000000000000F800000080A1031C0D000000415243411CBADB000200E0000E0D000000000000F8000000000B6B1B19000000415243411CBADB000200E000600F000000000000F80000008074D21A0A000000415243411CBADB000200E000DF08000000000000F80000000084D717F4010000415243411BBADB000200E000AAE2000000000000F80000000084D717F401000041524341239F80010200E000D06D010000000000F800000080ED3E173200000041524341B92EB5010200E00028241A0000000000F800000000FD4314640000004E53445159378101010000007308000000000000F800000080B2E60E90010000415243411BBADB000200E00054E1000000000000F800000080FE210A3200000041524341B39E80010200E0007D13000000000000F800000080D1F00864000000415243411DBADB00020060000D1E020000000000F8000000000E270764000000415243415F3BCC010200E0005C07000000000000F800000080778E0664000000415243411BBADB000200E000A908000000000000F800000000E1F505F4010000415243411BBADB000200E00089E8000000000000F800000000E1F50564000000415243417A8186010200E00090B9F1E4FD0A1C2DF800000000E1F5052C01000045444758C54BD601050000009F0F000000000000F8000000801D2C040D000000415243411CBADB000200E0004F5A020000000000F8000000801D2C049600000041524341CF79DE0102006000ED00000000000000F800000080F0FA02640000004152434119BADB000200E0009A0E000000000000F800000080F0FA020A000000415243411CBADB000200E000";
            Stream stream = Util.PacketStreamCreator(str);
            RespRefreshSymbolPacket rp = (RespRefreshSymbolPacket)Packet.GetPacket(stream);
            return rp;
        }
        [TestMethod()]
        public void RespRefreshSymbolPacketTest()
        {
            RespRefreshSymbolPacket rp = getPacket();
            Assert.AreEqual(rp.Bid, 249.08);
            Assert.AreEqual(rp.Ask, 249.09);
            Assert.AreEqual(rp.Volume, 306886);
            Assert.AreEqual(rp.Snapshot.Close, 249.39);
            Assert.AreEqual(rp.Steps, 15);
            Assert.AreEqual(rp.CompanyName, "SPDR S&P 500");
        }

        [TestMethod()]
        public void ToStringTest()
        {
            RespRefreshSymbolPacket rp = getPacket();
            Assert.AreEqual("SPDR S&P 500 100 306886 249.08 249.09 249.08 0 4000000000 SPY si=15 st=15 f=83 bi=83 mi=80", rp.ToString());
        }
    }
}